<%- model_class = Order -%>
<div class="page-header">
  <h2><%=t '.title', :default => model_class.model_name.human.titleize %></h2>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:customer) %>:</strong></dt>
  <dd><%= @order.customer.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:note) %>:</strong></dt>
  <dd><%= @order.note %></dd>
  <dt><strong><%= model_class.human_attribute_name(:status) %>:</strong></dt>
  <dd><%= @order.status %></dd>
</dl>

<hr/>

<%= link_to t('.back', :default => t("helpers.links.back")),
              orders_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_order_path(@order), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              order_path(@order),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
<%= link_to t('.addOrder', :default => t("helpers.links.addOrder")),
            new_order_detail_path(:order_id => @order.id), :class => 'btn btn-default' %>

<hr/>

<% @order.orderDetails.order_details.each do |detail| %>
  <div class="col-xs-12 list-group-item" style="padding:5px;">
    <span class="badge"><%= detail.created_at.strftime("%Y/%m/%d") %></span>
    <div class="col-xs-12">
      <p>
        <span class="label label-info">Order Id: <%= link_to detail.order_id, order_path(detail.order_id) %></span>
        <span class="label label-info">Detail Id: <%= link_to detail.id, order_detail_path(detail) %></span>
      </p>
    </div>
    <div class="col-xs-12">
      <p><%= detail.attributes["name_jp"] %></p>
      <p><%= detail.attributes["name_cn"] %></p>
    </div>
    <div class="col-xs-12">
      <p>
        <span class="label label-default">Quantity:<%= detail.quantity %></span>
        <span class="label label-default">Selling Price:<%= detail.selling_price %></span>
        <span class="label label-danger">Total: <%= detail.total_amount.to_s(:delimited) %></span>
      </p>
    </div>
    <div class="col-xs-12">
      <p>
        <span class="label label-default">OrderStatus:<%= detail.order_status %></span>
        <span class="label label-danger">OrderNote:<%= detail.order_note %></span>
      </p>
    </div>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_order_detail_path(detail), :class => 'btn btn-info btn-xs right-bttom' %>
  </div>
<% end %>
